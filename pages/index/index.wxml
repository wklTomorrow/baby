<!--pages/index/index.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="header">
    <text class="title">æˆé•¿æ—¶å…‰ç›’</text>
    <view class="settings-btn" bindtap="goToProfile">
      <text class="icon">âš™ï¸</text>
    </view>
  </view>

  <!-- æ—¥å†å¡ç‰‡ -->
  <view class="calendar-card card">
    <!-- æœˆä»½åˆ‡æ¢ -->
    <view class="month-header">
      <view class="month-btn" bindtap="prevMonth">
        <text class="icon">â€¹</text>
      </view>
      <text class="month-text">{{currentYear}}å¹´{{currentMonth}}æœˆ</text>
      <view class="month-btn" bindtap="nextMonth">
        <text class="icon">â€º</text>
      </view>
    </view>

    <!-- æ˜ŸæœŸæ ‡é¢˜ -->
    <view class="weekdays">
      <view class="weekday" wx:for="{{weekdays}}" wx:key="index">{{item}}</view>
    </view>

    <!-- æ—¥æœŸç½‘æ ¼ -->
    <view class="days-grid">
      <view 
        class="day-item {{item.isToday ? 'today' : ''}} {{item.isCurrentMonth ? '' : 'other-month'}} {{item.hasRecord ? 'has-record' : ''}}"
        wx:for="{{calendarDays}}" 
        wx:key="date"
        bindtap="onDayTap"
        data-date="{{item.date}}"
      >
        <text class="day-number">{{item.day}}</text>
        <view class="record-dot" wx:if="{{item.hasRecord}}"></view>
      </view>
    </view>

    <!-- å›åˆ°ä»Šå¤©æŒ‰é’® -->
    <view class="today-btn" bindtap="goToToday">
      <text>å›åˆ°ä»Šå¤©</text>
    </view>
  </view>

  <!-- ä»Šæ—¥ä¿¡æ¯ -->
  <view class="today-info card">
    <view class="today-header">
      <text class="icon">ğŸ“…</text>
      <text class="today-text">ä»Šå¤©ï¼š{{todayDateText}}</text>
    </view>
    <view class="today-records" wx:if="{{todayRecords.length > 0}}">
      <text class="record-count">å·²æœ‰ {{todayRecords.length}} æ¡è®°å½•</text>
      <view class="view-records-btn" bindtap="viewTodayRecords">
        <text>æŸ¥çœ‹ä»Šæ—¥è®°å½•</text>
      </view>
    </view>
    <view class="today-records" wx:else>
      <text class="empty-tip">ä»Šå¤©è¿˜æ²¡æœ‰è®°å½•å“¦~</text>
    </view>
  </view>

  <!-- å¿«é€Ÿæ·»åŠ æŒ‰é’® -->
  <view class="add-btn-container safe-area-bottom">
    <button class="add-btn btn-primary" bindtap="addRecord" hover-class="btn-hover">
      <text class="icon">ğŸ“¸</text>
      <text>æ·»åŠ ä»Šæ—¥è®°å½•</text>
    </button>
  </view>
</view>

